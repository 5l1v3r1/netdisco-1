#!/usr/bin/env perl

use strict;
use warnings FATAL => 'all';

BEGIN {
  eval "use Daemon::Control";
  if ($@) {
      exec("$ENV{HOME}/bin/localenv", $0, @ARGV);
  }
}

my $program = "$ENV{HOME}/bin/netdisco-daemon-fg";

Daemon::Control->new({
  name => 'Netdisco Daemon',
  program  => ($ENV{NETDISCO_DAEMON} || $program),
  pid_file => "$ENV{HOME}/netdisco-daemon.pid",
})->run;
